<html>
<head>
  <script src="js/libs/d3.min.js"></script>
</head>
<body>
    <script type="text/javascript">
        var sock = null;
        var wsuri = "ws://127.0.0.1:8888";

        window.onload = function() {

            console.log("onload");

            sock = new WebSocket(wsuri);

            sock.onopen = function() {
                console.log("connected to " + wsuri);
            }

            sock.onclose = function(e) {
                console.log("connection closed (" + e.code + ")");
            }

            sock.onmessage = function(e) {
                console.log("message received: " + e.data);
            }
        };

        function send(msgid) {
            var msg = document.getElementById(msgid).value;
            sock.send(msg);
        };
    </script>
    <h1>WebSocket Echo Test</h1>
    <form onsubmit="send('message1'); return false;">
        <p>
            Message: <input id="message1" type="text" value='{"source":101,"flavor":"start_touch","choice":"right","word":""}'>
        </p>
    </form>
    <button onclick="send('message1');">Send Message</button>

    <form onsubmit="send('message2'); return false;">
        <p>
            Message: <input id="message2" type="text" value='{"source":101,"flavor":"end_touch","choice":"right","word":""}'>
        </p>
    </form>
    <button onclick="send('message2');">Send Message</button>

</body>
</html>
